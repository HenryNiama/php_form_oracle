const spinner=document.getElementById("spinner");spinner.style.display="none";const form=document.getElementById("formulario"),btnBuscar=document.getElementById("btnBuscar");function validarCedulaRUC(){const e=document.getElementById("CE_RUCIC_CEDULA_PASSPORT").value;if(!e)return Swal.fire("Error","El RUC o Cédula es obligatorio.","error"),!1;const t=e.length;return 10===t||13===t||(Swal.fire("Error","El RUC o Cédula debe tener 10 o 13 dígitos.","error"),!1)}btnBuscar.addEventListener("click",(function(e){if(e.preventDefault(),validarCedulaRUC()){new bootstrap.Modal(document.getElementById("myModal")).show()}})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("CE_RUCIC_CEDULA_PASSPORT");function t(){document.getElementById("spinner").classList.remove("d-none")}e.addEventListener("change",(function(){var n=e.value;document.getElementById("spinner").classList.add("d-none"),fetch("/api/get-client-data?CE_RUCIC="+n).then((function(e){if(e.ok)return e.json();throw new Error("Cliente no encontrado")})).then((function(e){document.getElementById("CE_NOMBRE").value=e.CE_NOMBRE,document.getElementById("CE_APELLI").value=e.CE_APELLI,document.getElementById("CE_RAZONS").value=e.CE_RAZONS,document.getElementById("CE_RUCIC").value=e.CE_RUCIC,document.getElementById("CE_NOMREP").value=e.CE_NOMREP,document.getElementById("CE_APEREP").value=e.CE_APEREP,document.getElementById("CE_CADOM1").value=e.CE_CADOM1,document.getElementById("CE_CADOM2").value=e.CE_CADOM2,document.getElementById("CE_SECDOM").value=e.CE_SECDOM,document.getElementById("CE_CAOFI1").value=e.CE_CAOFI1,document.getElementById("CE_CAOF2").value=e.CE_CAOF2,document.getElementById("CE_SECOFI").value=e.CE_SECOFI,document.getElementById("CE_CAENT1").value=e.CE_CAENT1,document.getElementById("CE_CAENT2").value=e.CE_CAENT2,document.getElementById("CE_SECENT").value=e.CE_SECENT,document.getElementById("CE_TELDOM").value=e.CE_TELDOM,document.getElementById("CE_TELOFI").value=e.CE_TELOFI,document.getElementById("CE_TELBOD").value=e.CE_TELBOD,document.getElementById("CE_FAX").value=e.CE_FAX,document.getElementById("CE_EMAIL").value=e.CE_EMAIL,t()})).catch((function(e){alert(e.message),t()}))}))}));const guardarBtn=document.getElementById("guardarBtn");guardarBtn.addEventListener("click",()=>{const e=document.getElementById("CE_NOMBRE").value,t=document.getElementById("CE_APELLI").value,n=document.getElementById("CE_RAZONS").value,E=document.getElementById("CE_RUCIC").value,o=document.getElementById("CE_NOMREP").value,d=document.getElementById("CE_APEREP").value,l=document.getElementById("CE_CADOM1").value,m=document.getElementById("CE_CADOM2").value,u=document.getElementById("CE_SECDOM").value,a=document.getElementById("CE_CAOFI1").value,C=document.getElementById("CE_CAOF2").value,c=document.getElementById("CE_SECOFI").value,r=document.getElementById("CE_CAENT1").value,i=document.getElementById("CE_CAENT2").value,I=document.getElementById("CE_SECENT").value,_=document.getElementById("CE_TELDOM").value,B=document.getElementById("CE_TELOFI").value,g=document.getElementById("CE_TELBOD").value,y=document.getElementById("CE_FAX").value,s=document.getElementById("CE_EMAIL").value,v=document.getElementById("terminos").checked;if(""!==e.trim()&&""!==t.trim()&&""!==n.trim()&&""!==E.trim()&&""!==o.trim()&&""!==d.trim()&&""!==l.trim()&&""!==m.trim()&&""!==u.trim()&&""!==a.trim()&&""!==C.trim()&&""!==c.trim()&&""!==r.trim()&&""!==i.trim()&&""!==I.trim()&&""!==_.trim()&&""!==B.trim()&&""!==g.trim()&&""!==y.trim()&&""!==s.trim()&&v){const e=document.getElementById("formularioActualizado"),t=new URLSearchParams(new FormData(e));fetch("/",{method:"POST",body:t}).then(e=>e.text()).then(e=>{console.log(e),Swal.fire({title:"Datos actualizados correctamente",text:"Se actualizaron los datos correctamente",icon:"success",didClose:()=>{window.location.href="/"}})}).catch(e=>{console.error(e)})}else Swal.fire("Error","Por favor, completa todos los campos y acepta los términos y condiciones","error")});const formularioActualizado=document.getElementById("formularioActualizado");formularioActualizado.addEventListener("submit",(function(e){e.preventDefault(),console.log("Enviando formulario...")}));